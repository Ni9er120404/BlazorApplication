@page "/"
@page "/{categoryurl}"
@using BlazorApplication.Client.Services.CategoryService;
@using BlazorApplication.Shared;
@inject ICategoryService CategoryService

@if(category is not null)
{
	<h1>Welcome to the @category.Name section</h1>
	<ProductList CategoryId = "@category.Id"/>
}
else
{
	<h1>Welcome to the BalzorApplication</h1>
	<ProductList />
}

@code {
	[Parameter]
	public string CategoryUrl { get; set; }

	private Category? category = null;

	protected override void OnParametersSet()
	{
		if (CategoryUrl is not null)
		{
			category = CategoryService.Categories.FirstOrDefault(category => category.Url.ToLower() == CategoryUrl.ToLower());
		}
		else
		{
			category = null;
		}
	}
}